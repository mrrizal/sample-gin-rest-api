- pipeline: "Deploy to Heroku"
  trigger_mode: "ON_EVERY_PUSH"
  ref_name: "refs/tags/*"
  ref_type: "WILDCARD"
  fetch_all_refs: true
  fail_on_prepare_env_warning: true
  trigger_condition: "ALWAYS"
  actions:
  - action: "Execute: go build"
    type: "BUILD"
    working_directory: "/src/github.com/mrrizal/sample-gin-rest-api"
    docker_image_name: "library/golang"
    docker_image_tag: "1.13.8"
    execute_commands:
    - "export GOPATH=/"
    - "export GO15VENDOREXPERIMENT=1"
    - "go test"
    - "go build -o bin/main"
    volume_mappings:
    - "/:/src/github.com/mrrizal/sample-gin-rest-api"
    trigger_condition: "ALWAYS"
    shell: "BASH"
  - action: "Deploy to gin-rest-api"
    type: "HEROKU"
    application_name: "gin-rest-api"
    trigger_condition: "ALWAYS"
    integration_hash: "5f7d37ac37ceee284327c313"
